# AVATAR OnE 플랫폼 기능명세서 변경사항

**v1.3 → v1.4**
**작성일:** 2026-02-09
**변경 범위:** Pipeline→Avatar App 용어 전환, 3단계 계층구조, 컴포넌트 글로벌 라이브러리, Trainer 화면, 최소 실행 테스트 승인

---

## 변경 개요

v1.4에서는 두산에너빌리티(Doosan Enerbility) 고객 피드백 5건을 전면 반영하여 플랫폼을 강화학습(RL) 기반 엔지니어링 설계 최적화 플랫폼으로 진화시킨다. 주요 변경사항은 다음과 같다:

1. **용어 전환**: "파이프라인(Pipeline)" 용어를 "Avatar App(또는 App)"으로 완전 대체한다.
2. **3단계 계층 구조**: 기존 단일 레벨 컴포넌트 구조를 **App → Task → Component** 3단계 계층으로 재편한다.
3. **컴포넌트 글로벌 라이브러리**: 시스템 전역에서 재사용 가능한 컴포넌트를 등록·관리하는 카탈로그를 신규 추가한다.
4. **Trainer 별도 화면**: Builder와 완전 분리된 학습 요청 전용 화면을 신규 추가한다. Trainer에서 App 선택, 자원 할당, 학습 파라미터 설정, 요청 제출을 일괄 처리한다 (별도의 "워크로드 실행 요청" 단계 없음).
5. **최소 실행 테스트 필수화**: 관리자 승인이 필요한 **모든 워크로드**에 대해 최소 실행 테스트를 필수로 적용한다 (RL 한정이 아님).

추가로 **App Import**(다른 App을 가져와 해당 App의 Task들을 불러오는 기능, BL-12)을 P0 우선순위로 v1.4에서 구현한다.

---

## 1. 용어 변경

### 1.1 용어 매핑 테이블

v1.4에서 "파이프라인" 관련 용어를 전면 대체한다.

| v1.3 용어 | v1.4 용어 | 적용 범위 |
|-----------|-----------|-----------|
| 파이프라인 (Pipeline) | Avatar App (또는 App) | 전체 |
| 파이프라인 정의 | App 개발 | Builder 컨텍스트 |
| 파이프라인 스펙 파일 | App 스펙 파일 | 스펙 관련 |
| pipeline_id | app_id | JSON 스펙 구조 |
| 파이프라인 실행 | App 실행 | 실행 컨텍스트 |
| 파이프라인 레벨 | App 레벨 | 환경변수 등 |
| ML 학습 파이프라인 | Avatar App 워크스페이스 | 홈 화면 |
| 파이프라인을 정의하고 | App을 개발하고 | 설명문 |
| (신규) | Task | App 내 하위 작업 단위 |
| 컴포넌트 | Component (Task 내 실행 단위) | 3단계 계층 |

### 1.2 ID 체계 변경

| 엔티티 | v1.3 ID 접두사 | v1.4 ID 접두사 | 비고 |
|--------|---------------|---------------|------|
| Spec(App) | `SP-xxx` | `APP-xxx` | **변경** |
| Task | 없음 | `TASK-xxx` | **추가** |
| Component | `C-xxx` | `C-xxx` | 유지 |
| Component Library | 없음 | `CL-xxx` | **추가** |
| Workload | `WL-xxx` | `WL-xxx` | 유지 |
| Model | `MD-xxx` | `MD-xxx` | 유지 |
| Test Run (런타임) | `TR-xxx` | `RUN-xxx` | **변경** — Trainer 기능 ID(TR-01~08)와 충돌 방지 |

> **참고:** 기존 런타임 Test Run ID의 접두사 "TR-"는 Trainer 기능 ID "TR-01~TR-08"과 충돌하므로 "RUN-"으로 변경한다.

---

## 2. 전체 워크플로우 (섹션 1) — 변경

### 변경 전 (v1.3)
```
Builder로 파이프라인 정의 → 워크로드 실행 요청 → 테스트 실행 및 승인 → 실행 대기열 → 워크로드 실행 → 결과 모델 저장
```
6단계 워크플로우

### 변경 후 (v1.4)
```
Builder로 App 개발 → Trainer에서 학습 요청(자원 할당 포함) → 테스트/승인(최소 실행 테스트) → 실행 대기열 → 워크로드 실행 → 결과 모델 저장
```
6단계 워크플로우

### 단계별 변경 상세

| 단계 | v1.3 | v1.4 | 변경 |
|------|------|------|------|
| 1 | Builder로 파이프라인 정의 | Builder로 App 개발 (App → Task → Component 계층) | **변경** — 용어 + 계층 구조 |
| 2 | 워크로드 실행 요청 | **Trainer에서 학습 요청 (자원 할당 포함)** | **변경** — 기존 실행 요청이 Trainer로 통합 |
| 3 | 테스트 실행 및 승인 | 테스트 실행 및 승인 (최소 실행 테스트 포함) | **변경** — 최소 실행 테스트 필수화 |
| 4 | 실행 대기열 및 우선순위 관리 | 실행 대기열 및 우선순위 관리 | 유지 |
| 5 | 워크로드 실행 및 리소스 모니터링 | 워크로드 실행 및 리소스 모니터링 | 유지 |
| 6 | 결과 모델 저장 및 조회 | 결과 모델 저장 및 조회 | 유지 |

- 단계 1의 설명 변경:
  - **Before:** "사용자가 독립 컨테이너로 실행되는 컴포넌트를 정의하고(컴포넌트별 이미지, 자원 할당), 컴포넌트 간 실행 의존 관계를 워크플로우로 구성하면 스펙 파일(JSON)이 생성된다."
  - **After:** "사용자가 App을 생성하고, App 내 Task를 구성하며, 각 Task에 글로벌 라이브러리의 Component를 배치한다. App → Task → Component 3단계 계층으로 구성되며, 다른 App을 Import하여 해당 App의 Task들을 불러올 수 있다. 구성 완료 시 App 스펙 파일(JSON)이 생성된다."
- 단계 2의 설명 변경:
  - **Before:** "사용자가 실행할 파이프라인을 선택하고 자원을 요청하여 실행 요청을 제출한다."
  - **After:** "사용자가 Trainer 화면에서 개발 완료된 App을 선택하고, 리소스·학습 파라미터를 설정하여 학습 요청을 제출한다. App 선택, 자원 할당, 파라미터 설정, 제출이 Trainer에서 일괄 처리된다."

---

## 3. Builder (섹션 2) — 대폭 변경

### 3.1 섹션 제목 변경

- **Before:** "Builder (파이프라인 정의)"
- **After:** "Builder (App 개발)"

### 3.2 핵심 개념 변경

#### 변경 전 (v1.3)
Builder의 결과물은 "스펙 파일"이다. 이 스펙 파일은 컴포넌트별 스펙을 정의한 파이프라인이며, 각 컴포넌트는 독립된 컨테이너로 실행되며, 고유한 이미지와 자원 할당을 가진다. Builder는 두 개의 탭으로 구성된다.

#### 변경 후 (v1.4)
Builder는 **GUI 기반 시각적 앱 제작 도구**이다. 결과물은 "App 스펙 파일"이다. App은 **3단계 계층 구조**로 구성된다:
- **App** = 최상위 엔티티 (기존 파이프라인에 해당). 다른 App을 Import하여 해당 App의 Task들을 불러올 수 있다.
- **Task** = App 내 하위 작업 단위. 빈 컨테이너로 생성되며, GUI에서 Component와 연결로 채운다.
- **Component** = Task 내 개별 실행 단위. 각 Component가 하나의 Solver를 실행하며, 독립된 Docker 이미지와 자원 할당을 가진다. 글로벌 라이브러리에서 선택하여 배치한다.

Builder는 **GUI 캔버스 기반**으로 구성된다:
- **App 관리**: App 생성, Task 추가/관리, App Import (다른 App의 Task 불러오기)
- **Task 편집**: Task 선택 → GUI 캔버스에서 Component 배치 (글로벌 라이브러리에서 선택) 및 연결 관계 시각적 구성
- **워크플로우 시각화**: Task 단위 SVG 다이어그램 미리보기

### 3.3 탭 구조 변경

#### 변경 전 (v1.3) — 2탭

| 탭 | 내용 |
|----|------|
| 탭 1: 컴포넌트 관리 | 파이프라인 기본 정보, 환경 변수, 컴포넌트 목록 CRUD, 컴포넌트별 자원 할당, 임계치 표시 |
| 탭 2: 워크플로우 구성 | 실행 순서 테이블, 의존 관계 편집, 유효성 검증, 워크플로우 다이어그램 |

#### 변경 후 (v1.4) — 3탭

| 탭 | 내용 | 변경 |
|----|------|------|
| 탭 1: App 관리 | App 기본 정보(이름, 버전), 환경 변수(App 레벨), Task 목록 CRUD, **App Import (다른 App의 Task 불러오기)** | **변경** |
| 탭 2: Task 편집 | Task 선택 → **GUI 캔버스에서 글로벌 라이브러리의 Component 배치 및 연결 관계 시각적 구성**, Component별 자원 할당 | **변경** |
| 탭 3: 워크플로우 시각화 | Task 단위 SVG 다이어그램, 유효성 검증 | **변경** (기존 탭 2에서 분리) |

### 3.4 기능 명세 — 변경/추가 항목

| ID | 기능명 | v1.3 설명 | v1.4 변경사항 | 비고 |
|----|--------|-----------|---------------|------|
| BL-01 | 컨테이너 이미지 입력 | 각 컴포넌트별로 컨테이너 이미지 입력 | **Component별로 Docker 이미지를 입력한다.** 글로벌 라이브러리에서 선택 시 이미지가 자동 입력됨 | **변경** |
| BL-02 | 환경 변수 설정 | 파이프라인 레벨로 모든 컴포넌트가 공유 | **App 레벨**로 모든 Task/Component가 공유. 용어만 변경 | **변경** (용어) |
| BL-03 | 컴포넌트 스펙 정의 | 파이프라인을 구성하는 각 컴포넌트의 스펙 정의 | **Task 내 Component의 스펙을 정의한다.** Task → Component 계층 반영 | **변경** |
| BL-04 | 스펙 파일 생성 | 스펙 파일(JSON) 자동 생성 | **App 스펙 파일(JSON)을 자동 생성한다.** 3단계 계층 + training_config + imported_apps 반영 | **변경** |
| BL-05 | 스펙 파일 조회 | 스펙 파일 목록 조회 | **App 스펙 파일** 목록 조회. Task 수, Component 수, 최대 자원 요약 표시 | **변경** (용어) |
| BL-06 | 컴포넌트별 자원 할당 | 각 컴포넌트에 GPU, 메모리 독립 할당 | 변경 없음 (Task 내 Component에 적용) | 유지 |
| BL-07 | 워크플로우 구성 | 컴포넌트 간 실행 의존 관계 정의 | **GUI 캔버스에서 Task 내 Component 간** 연결 관계를 시각적으로 구성. Task 단위로 분리됨 | **변경** |
| BL-08 | 워크플로우 시각화 | SVG 다이어그램 미리보기 | **Task 단위** SVG 다이어그램 | **변경** |
| BL-09 | 워크플로우 유효성 검증 | 순환 참조, 자기 참조, 중복 연결 방지 | 변경 없음 (Task 내 워크플로우에 적용) | 유지 |
| **BL-10** | **Task CRUD** | *(신규)* | **App 관리 탭에서 Task를 추가, 편집, 삭제할 수 있다. Task는 Component의 논리적 그룹이다** | **추가** |
| **BL-11** | **Component 배치** | *(신규)* | **Task 편집 탭에서 글로벌 라이브러리의 Component를 선택하여 Task에 배치한다. 라이브러리 참조 ID를 유지한다** | **추가** |
| **BL-12** | **App Import (앱 가져오기)** | *(신규)* | **Builder에서 다른 App을 Import하면 해당 App에 포함된 Task들이 현재 App의 Task 목록에 불러와진다. Import된 Task는 원본 App에 대한 참조(imported_from)를 유지한다** | **추가** (P0, Phase 1) |

---

## 4. 컴포넌트 글로벌 라이브러리 (신규 섹션 3) — 추가

시스템 전역에서 재사용 가능한 컴포넌트를 등록·관리하는 카탈로그이다. Builder의 Task 편집 시 글로벌 라이브러리에서 컴포넌트를 선택하여 배치한다.

### 4.1 기능 명세

| ID | 기능명 | 설명 | 우선순위 | 구현 단계 |
|----|--------|------|----------|-----------|
| CL-01 | 컴포넌트 등록 | 글로벌 라이브러리에 새 컴포넌트를 등록한다 (이름, Docker 이미지, 설명, 버전) | P0 | Phase 1 |
| CL-02 | 컴포넌트 목록 조회 | 등록된 전체 컴포넌트 목록을 조회한다 (검색, 필터링 지원) | P0 | Phase 1 |
| CL-03 | 컴포넌트 상세 조회 | 컴포넌트의 상세 정보를 확인한다 (사용 이력, 버전 정보 포함) | P0 | Phase 1 |
| CL-04 | 컴포넌트 수정 | 등록된 컴포넌트의 정보를 수정한다 | P0 | Phase 1 |
| CL-05 | 컴포넌트 버전 관리 | 동일 컴포넌트의 버전 이력을 관리한다 | P1 | Phase 2 |
| CL-06 | 컴포넌트 재사용 | 라이브러리에서 컴포넌트를 선택하여 Task에 배치한다 | P0 | Phase 1 |

### 4.2 컴포넌트 속성

| 속성 | 설명 |
|------|------|
| name | 컴포넌트 이름 |
| image | Docker 이미지 (registry + tag) |
| description | 설명 |
| version | 버전 |
| created_at | 등록 일시 |
| used_in | 사용 중인 App/Task 목록 (참조) |

---

## 5. Trainer (신규 섹션 4) — 추가

개발 완료된 App에 대해 학습 파라미터와 리소스를 설정하여 학습 요청을 제출하는 전용 화면이다. Builder와 완전 분리된 별도 화면으로 운영된다. App 선택, 자원 할당, 학습 파라미터 설정, 요청 제출을 Trainer에서 일괄 처리한다.

### 5.1 기능 명세

| ID | 기능명 | 설명 | 우선순위 | 구현 단계 |
|----|--------|------|----------|-----------|
| TR-01 | 완료된 App 선택 | 학습 요청을 위해 개발 완료된(status=ready) App을 선택한다 | P0 | Phase 1 |
| TR-02 | 리소스 요청 | 학습에 필요한 GPU 유형, GPU 수, 메모리, 최대 실행 시간을 요청한다. App의 Component 최대값으로 자동 입력 | P0 | Phase 1 |
| TR-03 | 학습 파라미터 설정 | 에피소드 수, 학습률, 배치 크기, 감가율(gamma), 최대 스텝/에피소드 등 학습 파라미터를 설정한다 | P0 | Phase 1 |
| TR-04 | 환경 설정 | RL 환경 시뮬레이터의 구성을 설정한다 (환경 변수, 시뮬레이션 파라미터, 시뮬레이션 시드) | P0 | Phase 1 |
| TR-05 | 보상 함수 파라미터 | 보상 함수의 가중치와 파라미터를 설정한다 (목표 조건 설정 포함) | P0 | Phase 1 |
| TR-06 | 학습 요청 제출 | App + 리소스 + 학습 파라미터를 묶어 학습 요청을 제출한다. 기존 승인 프로세스에 진입 | P0 | Phase 1 |
| TR-07 | 학습 이력 조회 | 제출된 학습 요청의 이력과 상태를 조회한다 (대기, 승인대기, 실행 중, 완료) | P0 | Phase 1 |
| TR-08 | 학습 결과 비교 | 여러 학습 결과의 성능 메트릭을 비교한다 | P1 | Phase 2 |

### 5.2 RL 학습 파라미터

| 파라미터 | 설명 | 기본값 |
|----------|------|--------|
| 에피소드 수 (episodes) | 총 학습 에피소드 수 | 1000 |
| 학습률 (learning_rate) | 정책 네트워크 학습률 | 0.001 |
| 배치 크기 (batch_size) | 미니배치 크기 | 64 |
| 감가율 (gamma) | 미래 보상 할인율 | 0.99 |
| 최대 스텝/에피소드 (max_steps_per_episode) | 에피소드당 최대 스텝 수 | 500 |
| 환경 설정 (env_config) | 시뮬레이터 구성 파라미터 (JSON) | {} |
| 보상 파라미터 (reward_params) | 보상 함수 가중치/파라미터 (Key-Value) | {} |

### 5.3 워크로드 데이터 구조 확장

학습 요청 제출 시 기존 워크로드 데이터에 다음 필드가 추가된다:

| 필드 | 설명 | 비고 |
|------|------|------|
| isTrainingRequest | 학습 요청 여부 (boolean) | **추가** |
| trainingConfig | 학습 설정 객체 | **추가** |
| trainingConfig.episodes | 에피소드 수 | **추가** |
| trainingConfig.learningRate | 학습률 | **추가** |
| trainingConfig.batchSize | 배치 크기 | **추가** |
| trainingConfig.gamma | 감가율 | **추가** |
| trainingConfig.maxStepsPerEpisode | 최대 스텝/에피소드 | **추가** |
| trainingConfig.envConfig | 환경 설정 (JSON) | **추가** |
| trainingConfig.rewardParams | 보상 함수 파라미터 | **추가** |

---

## 6. 테스트 및 승인 (섹션 5) — 변경

### 6.1 섹션 번호 변경

- **Before:** 섹션 3 (워크로드 실행 요청 및 승인)
- **After:** 섹션 5 (테스트 및 승인). 기존 워크로드 실행 요청(WR-01~WR-05)은 Trainer(TR-01~TR-06)로 통합되어 삭제됨

### 6.2 승인 프로세스 — 변경 (CRITICAL)

v1.4에서 승인 프로세스에 **최소 실행 테스트**가 필수 추가된다. 이는 RL 학습 요청에만 적용되는 것이 아니라 **needsApproval(승인 필요) 상태인 모든 워크로드**에 적용된다.

| ID | 기능명 | v1.3 설명 | v1.4 변경사항 | 비고 |
|----|--------|-----------|---------------|------|
| AP-01 | 학습 요청 목록 조회 | **파이프라인** 실행 요청 목록 | **App** 학습 요청 목록 (Trainer에서 제출된 요청) | **변경** (용어 + Trainer 통합) |
| AP-02 | 요청 상세 검토 | 스펙 파일, 요청 자원량, 신청자 확인 | 변경 없음 | 유지 |
| AP-03 | 테스트 실행 | 관리자가 학습 요청을 테스트 실행 | **최소 실행 테스트**: 모든 needsApproval 워크로드에 대해 최소 실행 테스트를 수행한다. RL 워크로드는 최소 에피소드 실행 + 수렴 확인, 일반 워크로드는 최소 반복 실행 + 성공/실패 검증 | **변경** |
| AP-04 | 테스트 결과 확인 | 실행 로그, 성공/실패 확인 | **최소 실행 테스트 결과 확인**: RL은 에피소드별 보상 추이·수렴 그래프·최종 성능 지표, 일반은 반복 실행 로그·성공률·평균 실행 시간 표시 | **변경** |
| AP-05 | 승인/반려 처리 | 임계치 이상 시 관리자 승인 | **최소 실행 테스트 통과**가 승인 전제 조건으로 추가됨. 테스트 미실행 시 승인 불가 (경고 표시) | **변경** |

### 6.3 최소 실행 테스트 상세

#### 워크로드 유형별 테스트 로직

| 구분 | RL 학습 요청 (isTrainingRequest=true) | 일반 워크로드 |
|------|---------------------------------------|--------------|
| 테스트 내용 | 최소 에피소드 실행 | 최소 반복 실행 |
| 검증 기준 | 수렴 여부 확인 | 성공/실패 검증 |
| 결과 표시 | 에피소드별 보상 추이, 수렴 그래프, 최종 성능 지표 | 반복 실행 로그, 성공률, 평균 실행 시간 |

#### 테스트 결과 상태

| 상태 | 설명 |
|------|------|
| pending | 테스트 미실행 |
| running | 테스트 실행 중 |
| passed | 테스트 통과 |
| failed | 테스트 실패 |

#### 추가 규칙

- App 개발자가 테스트 결과를 학습 요청에 첨부 가능
- 관리자도 자체적으로 테스트 실행 가능
- 테스트 미실행 시 승인 버튼에 경고 표시 ("테스트 필요")
- 테스트 "통과(passed)" 시에만 승인 가능
- 자동 승인(임계치 미만) 워크로드에는 최소 실행 테스트가 적용되지 않음

#### loopTest 데이터 구조

needsApproval 워크로드에 자동 추가되는 필드:

```json
{
  "loopTest": {
    "status": "pending",
    "episodes": null,
    "results": null,
    "executedBy": null,
    "executedAt": null
  }
}
```

테스트 완료 후 (RL 워크로드 예시):

```json
{
  "loopTest": {
    "status": "passed",
    "episodes": 10,
    "results": {
      "convergence": true,
      "avgReward": 85.3,
      "finalReward": 92.1,
      "log": "Episode 1: reward=72.1\nEpisode 2: reward=78.5\n..."
    },
    "executedBy": "admin",
    "executedAt": "2026-02-09 14:30"
  }
}
```

테스트 완료 후 (일반 워크로드 예시):

```json
{
  "loopTest": {
    "status": "passed",
    "episodes": 5,
    "results": {
      "successRate": "100%",
      "avgDuration": "0.34s",
      "log": "Run 1: SUCCESS (0.32s)\nRun 2: SUCCESS (0.36s)\n..."
    },
    "executedBy": "admin",
    "executedAt": "2026-02-09 14:35"
  }
}
```

---

## 7. 스펙 파일 구조 변경

### 7.1 최상위 필드 변경

#### 변경 전 (v1.3)

| 필드 | 설명 |
|------|------|
| pipeline_id | 파이프라인 고유 식별자 |
| version | 스펙 파일 버전 |
| env_vars | 환경 변수 목록 (Key-Value). 파이프라인 레벨 |
| components[] | 컴포넌트 목록 (최상위) |
| workflow[] | 컴포넌트 간 의존 관계 (최상위) |
| storage | 저장소 설정 |
| created_at | 생성 일시 |
| test_run_ref | 테스트 실행 결과 참조 |

#### 변경 후 (v1.4)

| 필드 | 설명 | 변경 |
|------|------|------|
| **app_id** | **App 고유 식별자** | **변경** (pipeline_id → app_id) |
| version | 스펙 파일 버전 | 유지 |
| env_vars | 환경 변수 목록 (Key-Value). **App 레벨**, 모든 Task/Component 공유 | **변경** (용어) |
| ~~components[]~~ | ~~삭제됨~~ | **삭제** — tasks[].components[]로 이동 |
| ~~workflow[]~~ | ~~삭제됨~~ | **삭제** — tasks[].workflow[]로 이동 |
| **tasks[]** | **Task 목록: 각 Task의 ID, 이름, components[], workflow[]** | **추가** |
| **imported_apps[]** | **Import된 App 목록 (app_ref, name). Import 시 해당 App의 Task들이 tasks[]에 추가됨** | **추가** |
| **training_config** | **학습 설정 (에피소드, 학습률, 보상 파라미터, 환경 설정 등)** | **추가** |
| storage | 저장소 설정 | 유지 |
| created_at | 생성 일시 | 유지 |
| test_run_ref | 테스트 실행 결과 참조 | 유지 |

### 7.2 tasks[] 내부 구조

| 필드 | 설명 | 비고 |
|------|------|------|
| task_id | Task 고유 식별자 (TASK-xxx) | **추가** |
| name | Task 이름 | **추가** |
| imported_from | Import 원본 App ID (직접 생성 Task는 null) | **추가** |
| components[] | Task 내 Component 목록 (기존 최상위 components와 동일 구조) | **이동** |
| workflow[] | Task 내 Component 간 의존 관계 (기존 최상위 workflow와 동일 구조) | **이동** |

### 7.3 스펙 파일 JSON 예시

#### v1.3 예시

```json
{
  "pipeline_id": "PL-A1B2C3",
  "name": "LLM-FineTune-v3",
  "version": "1.0.0",
  "env_vars": {
    "NCCL_DEBUG": "INFO",
    "CUDA_VISIBLE_DEVICES": "all"
  },
  "components": [
    {
      "order": 1,
      "name": "data-loader",
      "image": { "registry": "registry.avatar.io/data-loader", "tag": "1.0" },
      "resources": { "gpu_type": "V100", "gpu_count": 1, "memory": "32GB" },
      "params": {}
    },
    {
      "order": 2,
      "name": "trainer",
      "image": { "registry": "registry.avatar.io/llm-trainer", "tag": "3.1" },
      "resources": { "gpu_type": "A100", "gpu_count": 4, "memory": "128GB" },
      "params": { "lr": 0.001, "epochs": 30 }
    }
  ],
  "workflow": [
    { "from": "data-loader", "to": "trainer" }
  ],
  "storage": {
    "type": "distributed",
    "path": "/training-data/llm-finetune-v3"
  },
  "created_at": "2026-02-09T09:00:00.000Z"
}
```

#### v1.4 예시

```json
{
  "app_id": "APP-A1B2C3",
  "name": "RL-DesignOpt-v1",
  "version": "1.0.0",
  "env_vars": {
    "NCCL_DEBUG": "INFO",
    "CUDA_VISIBLE_DEVICES": "all"
  },
  "tasks": [
    {
      "task_id": "TASK-001",
      "name": "parameter-optimization",
      "imported_from": null,
      "components": [
        {
          "component_id": "CL-REF-001",
          "name": "env-simulator",
          "image": { "registry": "registry.avatar.io/env-sim", "tag": "1.0" },
          "resources": { "gpu_type": "A100", "gpu_count": 2, "memory": "64GB" },
          "params": {}
        },
        {
          "component_id": "CL-REF-002",
          "name": "rl-agent",
          "image": { "registry": "registry.avatar.io/rl-agent", "tag": "2.0" },
          "resources": { "gpu_type": "A100", "gpu_count": 4, "memory": "128GB" },
          "params": { "lr": 0.001, "episodes": 1000 }
        },
        {
          "component_id": "CL-REF-003",
          "name": "reward-calc",
          "image": { "registry": "registry.avatar.io/reward-calc", "tag": "1.0" },
          "resources": { "gpu_type": "V100", "gpu_count": 1, "memory": "16GB" },
          "params": {}
        },
        {
          "component_id": "CL-REF-004",
          "name": "param-optimizer",
          "image": { "registry": "registry.avatar.io/param-opt", "tag": "1.5" },
          "resources": { "gpu_type": "A100", "gpu_count": 2, "memory": "64GB" },
          "params": {}
        }
      ],
      "workflow": [
        { "from": "CL-REF-001", "to": "CL-REF-002" },
        { "from": "CL-REF-002", "to": "CL-REF-003" },
        { "from": "CL-REF-003", "to": "CL-REF-004" }
      ]
    },
    {
      "task_id": "TASK-002",
      "name": "data-preprocessing",
      "imported_from": "APP-XYZ",
      "components": [
        {
          "component_id": "CL-REF-010",
          "name": "data-loader",
          "image": { "registry": "registry.avatar.io/data-loader", "tag": "1.0" },
          "resources": { "gpu_type": "V100", "gpu_count": 1, "memory": "32GB" },
          "params": {}
        }
      ],
      "workflow": []
    }
  ],
  "imported_apps": [
    { "app_ref": "APP-XYZ", "name": "PreProcessor-App" }
  ],
  "training_config": {
    "episodes": 1000,
    "learning_rate": 0.001,
    "batch_size": 64,
    "gamma": 0.99,
    "max_steps_per_episode": 500,
    "reward_params": {
      "efficiency_weight": 0.6,
      "safety_weight": 0.4
    },
    "env_config": {
      "simulation_seed": 42,
      "max_temp": 850,
      "min_pressure": 10
    }
  },
  "storage": {
    "type": "distributed",
    "path": "/training-data/rl-design-opt-v1"
  },
  "created_at": "2026-02-09T09:00:00.000Z"
}
```

---

## 8. 섹션 번호 재배치

신규 섹션 2개 삽입(컴포넌트 글로벌 라이브러리, Trainer)과 워크로드 실행 요청의 Trainer 통합으로 인해 기존 섹션 번호가 재배치된다.

| v1.3 섹션 | v1.4 섹션 | 내용 | 변경 |
|-----------|-----------|------|------|
| 1. 전체 워크플로우 | 1. 전체 워크플로우 | 6단계 유지 (내용 변경) | **변경** |
| 2. Builder (파이프라인 정의) | 2. Builder (App 개발) | 3계층, 3탭, BL-10~12 추가 | **대폭 변경** |
| — | **3. 컴포넌트 글로벌 라이브러리** | CL-01~CL-06 | **신규** |
| — | **4. Trainer (학습 요청)** | TR-01~TR-08, 기존 WR-01~WR-05 기능 통합 | **신규** |
| 3. 워크로드 실행 요청 및 승인 | **5. 테스트 및 승인** | WR 부분은 Trainer로 통합, AP 부분(승인 프로세스)만 유지 + 최소 실행 테스트 추가 | **변경** |
| 4. 실행 대기열 및 우선순위 관리 | 6. 실행 대기열 및 우선순위 관리 | 용어 변경 | **변경** (용어) |
| 5. 리소스 관리 | 7. 리소스 관리 | — | 변경 없음 |
| 6. 결과 모델 관리 | 8. 결과 모델 관리 | 용어 변경 | **변경** (용어) |
| 7. 워크로드 스케줄링 (HPC) | 9. 워크로드 스케줄링 (HPC) | 용어 변경 | **변경** (용어) |
| 8. 저장소 | 10. 저장소 | — | 변경 없음 |
| 9. 권한 관리 및 인증 | 11. 권한 관리 및 인증 | — | 변경 없음 |
| 10. 권장 기술 스택 | 12. 권장 기술 스택 | — | 변경 없음 |

---

## 9. 나머지 섹션 변경사항

### 9.1 용어 변경만 있는 섹션

| v1.4 섹션 | 변경 내용 |
|-----------|-----------|
| 6. 실행 대기열 및 우선순위 관리 | "파이프라인" → "App" 대체. 운영 범위 설명문 용어 변경 |
| 8. 결과 모델 관리 | MD-05 "동일 파이프라인에서 생성된 모델" → "동일 App에서 생성된 모델" |
| 9. 워크로드 스케줄링 (HPC) | "파이프라인" → "App" 대체 |

### 9.2 변경 없는 섹션

| v1.4 섹션 | 비고 |
|-----------|------|
| 7. 리소스 관리 | 변경 없음 |
| 10. 저장소 | 변경 없음 |
| 11. 권한 관리 및 인증 | 변경 없음 |
| 12. 권장 기술 스택 | 변경 없음 |

### 9.3 구현 로드맵 (섹션 12에 포함) — 변경

#### Phase 1 추가 항목 (v1.4)

기존 Phase 1 항목에 다음을 추가:

- **컴포넌트 글로벌 라이브러리:** 컴포넌트 등록, 목록 조회, 상세 조회, 수정, 재사용 (CL-01~CL-04, CL-06)
- **Trainer 화면:** App 선택, 리소스 요청, 학습 파라미터 설정, 학습 요청 제출, 이력 조회 (TR-01~TR-07)
- **App Import:** Builder에서 다른 App의 Task 가져오기 (BL-12)
- **3단계 계층 구조:** App → Task → Component 계층 (BL-10, BL-11)
- **최소 실행 테스트:** 모든 needsApproval 워크로드 대상 실행 테스트 필수화

#### Phase 2 조정

기존 Phase 2 항목 조정:

- ~~컴포넌트 템플릿 라이브러리~~ → Phase 1에서 글로벌 라이브러리로 구현됨. Phase 2에서는 **컴포넌트 버전 관리(CL-05)** 고도화
- 학습 결과 비교(TR-08) 추가

---

## 10. 변경 영향도 요약

| 영역 | 영향도 | 설명 |
|------|--------|------|
| Builder | **높음** | 전면 재구성 — GUI 기반 시각적 앱 제작, 3단계 계층(App→Task→Component), 2탭→3탭, BL-10~BL-12 추가, App Import |
| 컴포넌트 글로벌 라이브러리 | **높음** | 신규 섹션 — CL-01~CL-06, 시스템 전역 카탈로그, Builder 연동 |
| Trainer | **높음** | 신규 섹션 — TR-01~TR-08, Builder와 분리된 별도 화면, RL 학습 파라미터, 기존 워크로드 실행 요청(WR) 기능 통합 |
| 승인 프로세스 | **높음** | 최소 실행 테스트 필수화, RL/일반 분기 로직, loopTest 데이터 구조 추가 |
| 스펙 파일 구조 | **높음** | JSON 구조 변경 — pipeline_id→app_id, components/workflow가 tasks[] 내부로 이동, training_config·imported_apps 추가 |
| 용어 | **중간** | 전체 문서/UI의 "파이프라인"→"App" 대체, ID 접두사 변경 (SP→APP, TR→RUN) |
| 전체 워크플로우 | **중간** | 6단계 유지 (Trainer가 기존 워크로드 실행 요청 대체) |
| 실행 대기열 | **낮음** | 용어 변경만, 기존 흐름 유지 |
| 결과 모델 관리 | **낮음** | 용어 변경만, 기존 흐름 유지 |
| 워크로드 스케줄링 | **낮음** | 용어 변경만, 기존 흐름 유지 |
| 리소스 관리 | **없음** | 변경 없음 |
| 저장소 | **없음** | 변경 없음 |
| 권한 관리 | **없음** | 변경 없음 |
| 권장 기술 스택 | **없음** | 변경 없음 |

---

## 11. 버전 정보

| 항목 | v1.3 | v1.4 |
|------|------|------|
| 플랫폼 버전 표시 | v1.3 | v1.4 |
| 스펙 파일 구조 | 단일 레벨 (components[], workflow[] 최상위) | 3단계 계층 (tasks[].components[], tasks[].workflow[]) + training_config + imported_apps |
| 워크플로우 단계 수 | 6단계 | 6단계 (Trainer가 기존 워크로드 실행 요청 대체) |
| Builder 탭 수 | 2탭 (컴포넌트 관리, 워크플로우 구성) | 3탭 (App 관리, Task 편집, 워크플로우 시각화) |
| Builder 기능 수 | BL-01~BL-09 (9개) | BL-01~BL-12 (12개) |
| 섹션 수 | 11개 | 12개 (컴포넌트 라이브러리, Trainer 추가 / 워크로드 실행 요청은 Trainer로 통합) |
| 승인 프로세스 | 자원 임계치 기반 승인 | 자원 임계치 + 최소 실행 테스트 필수 |
| ID 접두사 (Spec) | SP-xxx | APP-xxx |
| ID 접두사 (Test Run) | TR-xxx | RUN-xxx |
| 핵심 용어 | 파이프라인 | Avatar App |
